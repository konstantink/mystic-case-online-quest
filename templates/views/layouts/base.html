<!DOCTYPE html>
<html>
    <head>
        <!-- Google Tag Manager -->
        <script>
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','{{ .GtmID }}');
        </script>
        <!-- End Google Tag Manager -->

        <!-- Alpine Plugins -->
        <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/focus@3.x.x/dist/cdn.min.js"></script>

        <script async src="/static/js/vendor/htmx.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
        <link rel="stylesheet" href="/static/styles.css" />
        <title>Mystic Case - Puzzle game for beginners - {{ .Title }}</title>
    </head>
    <body class="bg-mc-purple">
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ .GtmID }}"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->

        {{ template "header" }}

        {{embed}}

        {{ template "footer" }}

        <script async type="application/javascript">
            // async function onSubmit(e) {
            //     e.preventDefault();
            //     const input = document.querySelector("#inp-passcode");
            //     const output = document.querySelector("#answer");
            //     output.innerHTML = "";

            //     try {
            //         const resp = await fetch(document.location.href, {method: "POST", headers: {'Content-Type': "application/json"}, body: JSON.stringify({passcode: input.value})});
            //         const data = await resp.json();
            //         if (data.success) {
            //             const timeout = 1;
            //             let timeLeft = timeout;
            //             console.log(data.answer);
            //             output.className = "correct";
            //             output.innerHTML = `The asnwer <strong>&quot;${data.answer}&quot;</strong> is correct`;
            //             setTimeout(() => {
            //                 let interval = setInterval(() => {
            //                     timeLeft--;
            //                     if (timeLeft < 0) {
            //                         clearInterval(interval)
            //                         window.location = data.next_url
            //                     }
            //                 }, 500);
            //             }, 50);
            //         } else {
            //             output.className = "incorrect";
            //             output.innerHTML = `The asnwer <strong>&quot;${data.answer}&quot;</strong> is incorrect`;
            //         }
            //     } catch (err) {
            //         console.log(err);
            //     }
            // }
        </script>

        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->

    </body>
</html>